<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taxons le carbone, partageons les recettes !</title>
    <meta name="description"
        content="Analysez l'impact distributif de la tarification carbone à travers les groupes de revenus avec des mesures de compensation interactives et des visualisations détaillées.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css?v=1000">
</head>

<body>
    <main class="main-content">
        <div class="main-top-bar">
            <div class="page-title">
                <h2>Vote pour ta forme de redistribution préférée de la taxe carbone</h2>
            </div>
            <div class="page-actions">
                <button class="vote-button" id="voteBtn">
                    <span class="vote-text-main">Je vote</span>
                    <span class="vote-text-sub">pour cette redistribution</span>
                </button>
            </div>
        </div>

        <div class="content-grid">
            <aside class="sidebar">
                <div class="config-section">

                    <div class="config-content">
                        <div class="slider-control">
                            <div class="slider-label">
                                <span>Prix de la taxe carbone <span class="help-icon"
                                        data-tooltip="On suppose ici une taxe carbone qui couvre tous les usages d'énergie fossile, accompagnée d'un ajustement aux frontières équivalent pour les importations.">?</span></span>
                            </div>
                            <div class="slider-wrapper">
                                <input type="range" class="slider" id="carbonPriceSlider" min="45" max="300" value="100"
                                    data-value="100">
                                <div class="slider-value-tooltip" id="carbonPriceTooltip">100 €/tCO2eq</div>
                            </div>
                            <div class="slider-track-fill" id="carbonPriceTrackFill"></div>
                        </div>

                        <div class="slider-control">
                            <div class="slider-label">
                                <span>Revenu direct ou subventions ?</span>
                            </div>
                            <div class="slider-percentages">
                                <span class="slider-percent-left" id="subsidiesPercent">Sub. 0%</span>
                                <span class="slider-percent-right" id="revenuePercent">Revenu 100%</span>
                            </div>
                            <input type="range" class="slider" id="redistributionSlider" min="0" max="100" value="100">
                            <div class="slider-track-fill" id="redistributionTrackFill"></div>
                        </div>


                        <div class="slider-control">
                            <div class="slider-label">
                                <span>Bonus bas revenus <span class="help-icon" data-tooltip="Avec une redistribution uniforme, les bas déciles de revenus sont déjà gagnants, car ils émettent moins en moyenne que les hauts déciles. Néanmoins, on peut vouloir accentuer cette répartition avec un bonus 'bas revenus'
                                        . Plus ce bonus est élevé, plus les ménages à bas revenus reçoivent une part
                                        importante de la redistribution. Le calcul utilise une pondération progressive
                                        qui favorise les déciles inférieurs.">?</span></span>
                            </div>
                            <input type="range" class="slider" id="ponderationSlider" min="0" max="100" value="0">
                            <div class="slider-track-fill" id="ponderationTrackFill"></div>
                        </div>

                        <div class="slider-control">
                            <div class="slider-label">
                                <span>Bonus zones rurales <span class="help-icon"
                                        data-tooltip="Les données pour ce bonus ne sont pas encore disponibles, mais elles seront intégrées prochainement pour mieux refléter les spécificités des zones rurales.">?</span></span>
                            </div>
                            <input type="range" class="slider" id="bonusSlider" min="0" max="200" value="0">
                            <div class="slider-track-fill" id="bonusTrackFill"></div>
                        </div>
                    </div>
                </div>
            </aside>

            <section class="chart-section">

                <div class="legend">
                    <div class="legend-item">
                        <span class="legend-color"
                            style="background: rgba(74, 144, 226, 0.25); border: 2px dashed #4a90e2;"></span>
                        <span>Coût de la taxe carbone</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color-split">
                            <span style="background: #4CAF50;"></span>
                            <span style="background: #e74c3c;"></span>
                        </span>
                        <span>Coût après redistribution</span>
                    </div>
                </div>

                <div class="chart-label">Impact annuel par ménage (en €)</div>

                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>

                <div class="chart-footer">
                    <div class="chart-source">
                        Source: Pottier et al. (2020). Calculs propres basés sur les données nationales d'émissions.
                    </div>
                </div>
            </section>

            <aside class="right-sidebar" id="subsidiesPanel">
                <div class="config-section">
                    <h3 class="section-title">Choix des subventions <span class="subsidy-total"
                            id="totalSubsidyAmount"></span></h3>
                    <p class="section-subtitle">Répartissez les subventions (Total: 100%)</p>
                    <div class="config-content" id="subsidiesList">
                        <!-- Subsidies will be injected by JavaScript -->
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script src="app.js?v=8"></script>
</body>

</html>